---
framework: sveltekit
widgetPackage: "@ncodes/widget"
capabilityMapPath: "{{capabilityMapPath}}"
generatedBy: "n.codes CLI v{{version}}"
generatedAt: "{{timestamp}}"
---

# n.codes Installation for SvelteKit

## Prerequisites
- `{{capabilityMapPath}}` exists in project root (generated by `n.codes sync`)
- Project uses SvelteKit

## Step 1: Install the widget package

**Action:** Install the n.codes widget SDK.

```bash
npm install @ncodes/widget
```

**Verify:** `node_modules/@ncodes/widget` directory exists.

## Step 2: Copy capability map to static/

**Action:** Copy the JSON capability map to the static directory (SvelteKit uses `static/` instead of `public/`).

```bash
cp {{capabilityMapPath}} static/n.codes.capabilities.json
```

**Verify:** `static/n.codes.capabilities.json` exists and is valid JSON.

## Step 3: Add widget to root layout

**File:** `src/routes/+layout.svelte`
**Action:** Import and initialize the widget in the root layout using `onMount`.

```svelte
<script>
  import { onMount, onDestroy } from 'svelte';

  let { children } = $props();
  let NCodes;

  onMount(async () => {
    NCodes = await import('@ncodes/widget');
    // Replace with your actual auth state
    const user = { id: 'demo', name: 'Demo User' };
    if (user) {
      NCodes.init({
        user,
        capabilityMapUrl: '/n.codes.capabilities.json',
        mode: 'simulation',
        theme: 'auto',
      });
    }
  });

  onDestroy(() => {
    if (NCodes) NCodes.destroy();
  });
</script>

{@render children()}
```

**Note:** This uses Svelte 5 syntax. For Svelte 4 projects, replace `{@render children()}` with `<slot />` and `let { children } = $props()` with a regular variable declaration.

**Note:** Replace the hardcoded user with your actual auth state. If you use SvelteKit's `load()` functions for auth, pass the user from `$page.data`.

**Verify:** `src/routes/+layout.svelte` contains the widget initialization.

## Verification

1. Start the dev server: `npm run dev`
2. Open the app in a browser
3. Confirm the "Build with AI" floating button appears
4. Click it and enter a prompt
5. Confirm the simulation works
